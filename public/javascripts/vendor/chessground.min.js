!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Chessground=e()}}((function(){return function e(t,o,n){function r(s,c){if(!o[s]){if(!t[s]){var a="function"==typeof require&&require;if(!c&&a)return a(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var d=o[s]={exports:{}};t[s][0].call(d.exports,(function(e){return r(t[s][1][e]||e)}),d,d.exports,e,t,o,n)}return o[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.render=o.anim=void 0;const n=e("./util");function r(e,t){const o=e(t);return t.dom.redraw(),o}function i(e,t){return{key:e,pos:n.key2pos(e),piece:t}}function s(e,t){return t.sort(((t,o)=>n.distanceSq(e.pos,t.pos)-n.distanceSq(e.pos,o.pos)))[0]}function c(e,t){const o=e.animation.current;if(void 0===o)return void(e.dom.destroyed||e.dom.redrawNow());const n=1-(t-o.start)*o.frequency;if(n<=0)e.animation.current=void 0,e.dom.redrawNow();else{const t=(r=n)<.5?4*r*r*r:(r-1)*(2*r-2)*(2*r-2)+1;for(const e of o.plan.anims.values())e[2]=e[0]*t,e[3]=e[1]*t;e.dom.redrawNow(!0),requestAnimationFrame(((t=performance.now())=>c(e,t)))}var r}o.anim=function(e,t){return t.animation.enabled?function(e,t){const o=new Map(t.pieces),r=e(t),a=function(e,t){const o=new Map,r=[],c=new Map,a=[],l=[],d=new Map;let p,u,h;for(const[n,s]of e)d.set(n,i(n,s));for(const s of n.allKeys(t.geometry))p=t.pieces.get(s),u=d.get(s),p?u?n.samePiece(p,u.piece)||(a.push(u),l.push(i(s,p))):l.push(i(s,p)):u&&a.push(u);for(const i of l)u=s(i,a.filter((e=>n.samePiece(i.piece,e.piece)))),u&&(h=[u.pos[0]-i.pos[0],u.pos[1]-i.pos[1]],o.set(i.key,h.concat(h)),r.push(u.key));for(const n of a)r.includes(n.key)||c.set(n.key,n.piece);return{anims:o,fadings:c}}(o,t);if(a.anims.size||a.fadings.size){const e=t.animation.current&&t.animation.current.start;t.animation.current={start:performance.now(),frequency:1/t.animation.duration,plan:a},e||c(t,performance.now())}else t.dom.redraw();return r}(e,t):r(e,t)},o.render=r},{"./util":20}],2:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.start=void 0;const n=e("./board"),r=e("./fen"),i=e("./config"),s=e("./anim"),c=e("./drag"),a=e("./explosion");o.start=function(e,t){return{set(o){var r;o.orientation&&o.orientation!==e.orientation&&(r=o.orientation,n.setOrientation(e,r),t()),(o.fen?s.anim:s.render)((e=>(0,i.configure)(e,o)),e)},state:e,getFen:()=>(0,r.write)(e.pieces,e.geometry),toggleOrientation:function(){n.toggleOrientation(e),t()},setPieces(t){(0,s.anim)((e=>n.setPieces(e,t)),e)},selectSquare(t,o){t?(0,s.anim)((e=>n.selectSquare(e,t,o)),e):e.selected&&(n.unselect(e),e.dom.redraw())},move(t,o){(0,s.anim)((e=>n.baseMove(e,t,o)),e)},newPiece(t,o){(0,s.anim)((e=>n.baseNewPiece(e,t,o)),e)},playPremove(){if(e.premovable.current){if((0,s.anim)(n.playPremove,e))return!0;e.dom.redraw()}return!1},playPredrop(t){if(e.predroppable.current){const o=n.playPredrop(e,t);return e.dom.redraw(),o}return!1},cancelPremove(){(0,s.render)(n.unsetPremove,e)},cancelPredrop(){(0,s.render)(n.unsetPredrop,e)},cancelMove(){(0,s.render)((e=>{n.cancelMove(e),(0,c.cancel)(e)}),e)},stop(){(0,s.render)((e=>{n.stop(e),(0,c.cancel)(e)}),e)},explode(t){(0,a.default)(e,t)},setAutoShapes(t){(0,s.render)((e=>e.drawable.autoShapes=t),e)},setShapes(t){(0,s.render)((e=>e.drawable.shapes=t),e)},getKeyAtDomPos:t=>n.getKeyAtDomPos(t,e.orientation,e.dom.bounds(),e.geometry),redrawAll:t,dragNewPiece(t,o,n){(0,c.dragNewPiece)(e,t,o,n)},destroy(){n.stop(e),e.dom.unbind&&e.dom.unbind(),e.dom.destroyed=!0}}}},{"./anim":1,"./board":3,"./config":5,"./drag":6,"./explosion":10,"./fen":11}],3:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.getSnappedKeyAtDomPos=o.whitePov=o.getKeyAtDomPos=o.stop=o.cancelMove=o.playPredrop=o.playPremove=o.isDraggable=o.isPredroppable=o.canMove=o.unselect=o.setSelected=o.selectSquare=o.dropNewPiece=o.userMove=o.baseNewPiece=o.baseMove=o.unsetPredrop=o.unsetPremove=o.setPieces=o.reset=o.toggleOrientation=o.setOrientation=void 0;const n=e("./util"),r=e("./premove"),i=e("./predrop"),s=e("./types"),c=e("./transformations");function a(e,t){e.orientation=t,e.animation.current=e.draggable.current=e.selected=void 0}function l(e){e.premovable.current&&(e.premovable.current=void 0,(0,n.callUserFunction)(e.premovable.events.unset))}function d(e){const t=e.predroppable;t.current&&(t.current=void 0,(0,n.callUserFunction)(t.events.unset))}function p(e,t,o){const r=e.pieces.get(t),i=e.pieces.get(o);if(t===o||!r)return!1;const s=i&&i.color!==r.color?i:void 0;return o===e.selected&&g(e),(0,n.callUserFunction)(e.events.move,t,o,s),function(e,t,o){if(!e.autoCastle)return!1;const r=e.pieces.get(t);if(!r||"k-piece"!==r.role)return!1;const i=(0,n.key2pos)(t),s=(0,n.key2pos)(o);if(1!==i[1]&&8!==i[1]||i[1]!==s[1])return!1;5!==i[0]||e.pieces.has(o)||(7===s[0]?o=(0,n.pos2key)([8,s[1]]):3===s[0]&&(o=(0,n.pos2key)([1,s[1]])));const c=e.pieces.get(o);return!(!c||c.color!==r.color||"r-piece"!==c.role||(e.pieces.delete(t),e.pieces.delete(o),i[0]<s[0]?(e.pieces.set((0,n.pos2key)([7,s[1]]),r),e.pieces.set((0,n.pos2key)([6,s[1]]),c)):(e.pieces.set((0,n.pos2key)([3,s[1]]),r),e.pieces.set((0,n.pos2key)([4,s[1]]),c)),0))}(e,t,o)||(e.pieces.set(o,r),e.pieces.delete(t)),e.lastMove=[t,o],e.check=void 0,(0,n.callUserFunction)(e.events.change),s||!0}function u(e,t,o,r){if(e.pieces.has(o)){if(!r)return!1;e.pieces.delete(o)}return(0,n.callUserFunction)(e.events.dropNewPiece,t,o),e.pieces.set(o,t),e.lastMove=[o],e.check=void 0,(0,n.callUserFunction)(e.events.change),e.movable.dests=void 0,e.dropmode.dropDests=void 0,e.turnColor=(0,n.opposite)(e.turnColor),!0}function h(e,t,o){const r=p(e,t,o);return r&&(e.movable.dests=void 0,e.dropmode.dropDests=void 0,e.turnColor=(0,n.opposite)(e.turnColor),e.animation.current=void 0),r}function b(e,t,o){if(v(e,t,o)){const r=h(e,t,o);if(r){const i=e.hold.stop();g(e);const s={premove:!1,ctrlKey:e.stats.ctrlKey,holdTime:i};return!0!==r&&(s.captured=r),(0,n.callUserFunction)(e.movable.events.after,t,o,s),!0}}else if(function(e,t,o){return t!==o&&k(e,t)&&(0,n.containsX)((0,r.premove)(e.pieces,t,e.premovable.castle,e.geometry,e.variant,e.chess960),o)}(e,t,o))return function(e,t,o,r){d(e),e.premovable.current=[t,o],(0,n.callUserFunction)(e.premovable.events.set,t,o,r)}(e,t,o,{ctrlKey:e.stats.ctrlKey}),g(e),!0;return g(e),!1}function f(e,t){e.selected=t,k(e,t)?e.premovable.dests=(0,r.premove)(e.pieces,t,e.premovable.castle,e.geometry,e.variant,e.chess960):(e.premovable.dests=void 0,e.predroppable.dropDests=void 0)}function g(e){e.selected=void 0,e.premovable.dests=void 0,e.predroppable.dropDests=void 0,e.hold.cancel()}function m(e,t){const o=e.pieces.get(t);return!!o&&("both"===e.movable.color||e.movable.color===o.color&&e.turnColor===o.color)}function v(e,t,o){var n,r;return t!==o&&m(e,t)&&(e.movable.free||!!(null===(r=null===(n=e.movable.dests)||void 0===n?void 0:n.get(t))||void 0===r?void 0:r.includes(o)))}function k(e,t){const o=e.pieces.get(t);return!!o&&e.premovable.enabled&&e.movable.color===o.color&&e.turnColor!==o.color}function w(e){l(e),d(e),g(e)}o.setOrientation=a,o.toggleOrientation=function(e){a(e,(0,n.oppositeOrientation)(e.orientation))},o.reset=function(e){e.lastMove=void 0,g(e),l(e),d(e)},o.setPieces=function(e,t){for(const[o,n]of t)n?e.pieces.set(o,n):e.pieces.delete(o)},o.unsetPremove=l,o.unsetPredrop=d,o.baseMove=p,o.baseNewPiece=u,o.userMove=b,o.dropNewPiece=function(e,t,o,r){const s=e.pieces.get(t);var c,a;s&&(function(e,t,o){const n=e.pieces.get(t);return!!n&&o&&(t===o||!e.pieces.has(o))&&("both"===e.movable.color||e.movable.color===n.color&&e.turnColor===n.color)}(e,t,o)||r)?(e.pieces.delete(t),u(e,s,o,r),(0,n.callUserFunction)(e.movable.events.afterNewPiece,s.role,o,{premove:!1,predrop:!1})):s&&function(e,t,o){const r=e.pieces.get(t),s=e.pieces.get(o);if(!r)return!1;const c=(0,n.containsX)((0,i.default)(e.pieces,r,e.geometry,e.variant),o);return(!s||s.color!==e.movable.color)&&e.predroppable.enabled&&c&&e.movable.color===r.color&&e.turnColor!==r.color}(e,t,o)?function(e,t,o){l(e),e.predroppable.current={role:t,key:o},(0,n.callUserFunction)(e.predroppable.events.set,t,o)}(e,s.role,o):(l(e),d(e),(c=e).dropmode.active=!1,(0,n.callUserFunction)(null===(a=c.dropmode.events)||void 0===a?void 0:a.cancel)),e.pieces.delete(t),g(e)},o.selectSquare=function(e,t,o){if((0,n.callUserFunction)(e.events.select,t),e.selected){if(e.selected===t&&!e.draggable.enabled)return g(e),void e.hold.cancel();if((e.selectable.enabled||o)&&e.selected!==t&&b(e,e.selected,t))return void(e.stats.dragged=!1)}(m(e,t)||k(e,t))&&(f(e,t),e.hold.start())},o.setSelected=f,o.unselect=g,o.canMove=v,o.isPredroppable=function(e){var t,o;const n=e.dropmode.active?e.dropmode.piece:null===(t=e.draggable.current)||void 0===t?void 0:t.piece;return!!n&&(e.dropmode.active||"a0"===(null===(o=e.draggable.current)||void 0===o?void 0:o.orig))&&e.predroppable.enabled&&e.movable.color===n.color&&e.turnColor!==n.color},o.isDraggable=function(e,t){const o=e.pieces.get(t);return!!o&&e.draggable.enabled&&("both"===e.movable.color||e.movable.color===o.color&&(e.turnColor===o.color||e.premovable.enabled))},o.playPremove=function(e){const t=e.premovable.current;if(!t)return!1;const o=t[0],r=t[1];let i=!1;if(v(e,o,r)){const t=h(e,o,r);if(t){const s={premove:!0};!0!==t&&(s.captured=t),(0,n.callUserFunction)(e.movable.events.after,o,r,s),i=!0}}return l(e),i},o.playPredrop=function(e,t){const o=e.predroppable.current;let r=!1;if(!o)return!1;if(t(o)){u(e,{role:o.role,color:e.movable.color},o.key)&&((0,n.callUserFunction)(e.movable.events.afterNewPiece,o.role,o.key,{premove:!1,predrop:!0}),r=!0)}return d(e),r},o.cancelMove=w,o.stop=function(e){e.movable.color=e.movable.dests=e.dropmode.dropDests=e.animation.current=void 0,w(e)},o.getKeyAtDomPos=function(e,t,o,r){const i=s.dimensions[r];return e=[Math.ceil(i.width*((e[0]-o.left)/o.width)),Math.ceil(i.height-i.height*((e[1]-o.top)/o.height))],(e=c.mapToWhite[t](e,i))[0]>0&&e[0]<i.width+1&&e[1]>0&&e[1]<i.height+1?(0,n.pos2key)(e):void 0},o.whitePov=function(e){return"white"===e.myColor},o.getSnappedKeyAtDomPos=function(e,t,o,i,c){const a=s.dimensions[c],l=(0,n.key2pos)(e),d=(0,n.allPos)(c).filter((e=>(0,r.queen)(l[0],l[1],e[0],e[1])||(0,r.knight)(l[0],l[1],e[0],e[1]))),p=d.map((e=>(0,n.computeSquareCenter)((0,n.pos2key)(e),o,i,a))).map((e=>(0,n.distanceSq)(t,e))),[,u]=p.reduce(((e,t,o)=>e[0]<t?e:[t,o]),[p[0],0]);return(0,n.pos2key)(d[u])}},{"./predrop":13,"./premove":14,"./transformations":18,"./types":19,"./util":20}],4:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.Chessground=void 0;const n=e("./api"),r=e("./config"),i=e("./state"),s=e("./wrap"),c=e("./events"),a=e("./render"),l=e("./svg"),d=e("./util");function p(e){let t=!1;return()=>{t||(t=!0,requestAnimationFrame((()=>{e(),t=!1})))}}o.Chessground=function(e,t){const o=(0,i.defaults)();function u(){const t="dom"in o?o.dom.unbind:void 0,n=o.viewOnly&&!o.drawable.visible,r=(0,s.renderWrap)(e,o,n),i=d.memo((()=>r.board.getBoundingClientRect())),u=e=>{(0,a.render)(b),!e&&r.svg&&l.renderSvg(b,r.svg,r.customSvg)},h=()=>{i.clear(),(0,a.updateBounds)(b),r.svg&&l.renderSvg(b,r.svg,r.customSvg)},b=o;return b.dom={elements:r,bounds:i,redraw:p(u),redrawNow:u,unbind:t,relative:n},b.drawable.prevSvgHash="",u(!1),c.bindBoard(b,h),t||(b.dom.unbind=c.bindDocument(b,h)),b.events.insert&&b.events.insert(r),b}return(0,r.configure)(o,t||{}),(0,n.start)(u(),u)}},{"./api":2,"./config":5,"./events":9,"./render":15,"./state":16,"./svg":17,"./util":20,"./wrap":21}],5:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.configure=void 0;const n=e("./board"),r=e("./fen"),i=e("./types");function s(e,t){for(const o in t)c(e[o])&&c(t[o])?s(e[o],t[o]):e[o]=t[o]}function c(e){return"object"==typeof e}o.configure=function(e,t){var o,c;if(t.movable&&t.movable.dests&&(e.movable.dests=void 0),(null===(o=t.dropmode)||void 0===o?void 0:o.dropDests)&&(e.dropmode.dropDests=void 0),(null===(c=t.drawable)||void 0===c?void 0:c.autoShapes)&&(e.drawable.autoShapes=[]),s(e,t),t.geometry&&(e.dimensions=i.dimensions[t.geometry]),t.fen){const o=(0,r.read)(t.fen,e.dimensions);void 0!==e.pieces.get("a0")&&o.set("a0",e.pieces.get("a0")),e.pieces=o,e.drawable.shapes=[]}if("check"in t&&function(e,t){e.check=void 0,!0===t&&(t=e.turnColor);if(t)for(const[o,n]of e.pieces)"k-piece"===n.role&&n.color===t&&(e.check=o)}(e,t.check||!1),"lastMove"in t&&!t.lastMove?e.lastMove=void 0:t.lastMove&&(e.lastMove=t.lastMove),e.selected&&(0,n.setSelected)(e,e.selected),(!e.animation.duration||e.animation.duration<100)&&(e.animation.enabled=!1),!e.movable.rookCastle&&e.movable.dests){const t="white"===e.movable.color?1:8,o="e"+t,n=e.movable.dests.get(o),r=e.pieces.get(o);if(!n||!r||"k-piece"!==r.role)return;e.movable.dests.set(o,n.filter((e=>!(e==="a"+t&&n.includes("c"+t)||e==="h"+t&&n.includes("g"+t)))))}}},{"./board":3,"./fen":11,"./types":19}],6:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.cancel=o.end=o.move=o.dragNewPiece=o.start=void 0;const n=e("./board"),r=e("./util"),i=e("./draw"),s=e("./anim"),c=e("./predrop"),a=e("./transformations");function l(e){requestAnimationFrame((()=>{var t;const o=e.draggable.current;if(!o)return;(null===(t=e.animation.current)||void 0===t?void 0:t.plan.anims.has(o.orig))&&(e.animation.current=void 0);const n=e.pieces.get(o.orig);if(n&&r.samePiece(n,o.piece)){if(!o.started&&r.distanceSq(o.epos,o.rel)>=Math.pow(e.draggable.distance,2)&&(o.started=!0),o.started){if("function"==typeof o.element){const e=o.element();if(!e)return;e.cgDragging=!0,e.classList.add("dragging"),o.element=e}o.pos=[o.epos[0]-o.rel[0],o.epos[1]-o.rel[1]];const t=r.posToTranslateAbs(e.dom.bounds(),e.dimensions)(o.origPos,e.orientation);t[0]+=o.pos[0]+o.dec[0],t[1]+=o.pos[1]+o.dec[1],r.translateAbs(o.element,t)}}else d(e);l(e)}))}function d(e){const t=e.draggable.current;t&&(t.newPiece&&e.pieces.delete(t.orig),e.draggable.current=void 0,n.unselect(e),p(e),e.dom.redraw())}function p(e){const t=e.dom.elements;t.ghost&&r.setVisible(t.ghost,!1)}function u(e,t,o,n){const i=a.mapToWhiteInverse[n](r.key2pos(e),o);return{left:t.left+t.width*(i[0]-1)/o.width,top:t.top+t.height*(o.height-i[1])/o.height,width:t.width/o.width,height:t.height/o.height}}function h(e,t){let o=e.dom.elements.board.firstChild;for(;o;){if(o.cgKey===t&&"PIECE"===o.tagName)return o;o=o.nextSibling}}o.start=function(e,t){if(!t.isTrusted||void 0!==t.button&&0!==t.button)return;if(t.touches&&t.touches.length>1)return;const o=e.dom.bounds(),c=r.eventPosition(t),a=n.getKeyAtDomPos(c,e.orientation,o,e.geometry);if(!a)return;const d=e.pieces.get(a),p=e.selected;p||!e.drawable.enabled||!e.drawable.eraseOnClick&&d&&d.color===e.turnColor||(0,i.clear)(e),!1===t.cancelable||t.touches&&e.movable.color&&!d&&!p&&!function(e,t){const o=e.orientation,n=e.dom.bounds(),i=Math.pow(n.width/8,2);for(const s in e.pieces){const c=u(s,n,e.dimensions,o),a=[c.left+c.width/2,c.top+c.height/2];if(r.distanceSq(a,t)<=i)return!0}return!1}(e,c)||t.preventDefault();const b=!!e.premovable.current,f=!!e.predroppable.current;e.stats.ctrlKey=t.ctrlKey,e.selected&&n.canMove(e,e.selected,a)?(0,s.anim)((e=>n.selectSquare(e,a)),e):n.selectSquare(e,a);const g=e.selected===a,m=h(e,a);if(d&&m&&g&&n.isDraggable(e,a)){const n=u(a,o,e.dimensions,e.orientation);e.draggable.current={orig:a,origPos:r.key2pos(a),piece:d,rel:c,epos:c,pos:[0,0],dec:e.draggable.centerPiece?[c[0]-(n.left+n.width/2),c[1]-(n.top+n.height/2)]:[0,0],started:e.draggable.autoDistance&&e.stats.dragged,element:m,previouslySelected:p,originTarget:t.target},m.cgDragging=!0,m.classList.add("dragging");const i=e.dom.elements.ghost;if(i){const t=d.promoted?"promoted ":"",n=d.color===e.myColor?"ally":"enemy";i.className=`ghost ${d.color} ${t}${d.role} ${n}`,r.translateAbs(i,r.posToTranslateAbs(o,e.dimensions)(r.key2pos(a),e.orientation)),r.setVisible(i,!0)}l(e)}else b&&n.unsetPremove(e),f&&n.unsetPredrop(e);e.dom.redraw()},o.dragNewPiece=function(e,t,o,i){const s="a0";e.pieces.set(s,t),e.dom.redraw();const a=r.eventPosition(o),d=n.whitePov(e),p=e.dom.bounds(),b=u(s,p,e.dimensions,e.orientation),f=[(d?0:e.dimensions.width-1)*b.width+p.left,(d?e.dimensions.height:-1)*b.height+p.top];e.draggable.current={orig:s,origPos:r.key2pos("a0"),piece:t,rel:f,epos:a,pos:[a[0]-f[0],a[1]-f[1]],dec:[-b.width/2,-b.height/2],started:!0,element:()=>h(e,s),originTarget:o.target,newPiece:!0,force:!!i},t&&n.isPredroppable(e)&&(e.predroppable.dropDests=(0,c.default)(e.pieces,t,e.geometry,e.variant)),l(e)},o.move=function(e,t){e.draggable.current&&(!t.touches||t.touches.length<2)&&(e.draggable.current.epos=r.eventPosition(t))},o.end=function(e,t){const o=e.draggable.current;if(!o)return;if("touchend"===t.type&&!1!==t.cancelable&&t.preventDefault(),"touchend"===t.type&&o&&o.originTarget!==t.target&&!o.newPiece)return void(e.draggable.current=void 0);n.unsetPremove(e),n.unsetPredrop(e);const i=r.eventPosition(t)||o.pos,s=n.getKeyAtDomPos(i,e.orientation,e.dom.bounds(),e.geometry);s&&o.started&&o.orig!==s?o.newPiece?n.dropNewPiece(e,o.orig,s,o.force):(e.stats.ctrlKey=t.ctrlKey,n.userMove(e,o.orig,s)&&(e.stats.dragged=!0)):o.newPiece?e.pieces.delete(o.orig):e.draggable.deleteOnDropOff&&!s&&(e.pieces.delete(o.orig),r.callUserFunction(e.events.change)),(!o||o.orig!==o.previouslySelected||o.orig!==s&&s)&&e.selectable.enabled||n.unselect(e),p(e),e.draggable.current=void 0,e.dom.redraw()},o.cancel=d},{"./anim":1,"./board":3,"./draw":7,"./predrop":13,"./transformations":18,"./util":20}],7:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.clear=o.cancel=o.end=o.move=o.processDraw=o.start=void 0;const n=e("./board"),r=e("./util"),i=["green","red","blue","yellow"];function s(e){requestAnimationFrame((()=>{const t=e.drawable.current;if(t){const o=(0,n.getKeyAtDomPos)(t.pos,e.orientation,e.dom.bounds(),e.geometry);o||(t.snapToValidMove=!1);const r=t.snapToValidMove?(0,n.getSnappedKeyAtDomPos)(t.orig,t.pos,e.orientation,e.dom.bounds(),e.geometry):o;r!==t.mouseSq&&(t.mouseSq=r,t.dest=r!==t.orig?r:void 0,e.dom.redrawNow()),s(e)}}))}function c(e){e.drawable.current&&(e.drawable.current=void 0,e.dom.redraw())}function a(e){var t;const o=(e.shiftKey||e.ctrlKey)&&(0,r.isRightButton)(e),n=e.altKey||e.metaKey||(null===(t=e.getModifierState)||void 0===t?void 0:t.call(e,"AltGraph"));return i[(o?1:0)+(n?2:0)]}function l(e){e.onChange&&e.onChange(e.shapes)}o.start=function(e,t){if(t.touches&&t.touches.length>1)return;t.stopPropagation(),t.preventDefault(),t.ctrlKey?(0,n.unselect)(e):(0,n.cancelMove)(e);const o=(0,r.eventPosition)(t),i=(0,n.getKeyAtDomPos)(o,e.orientation,e.dom.bounds(),e.geometry);i&&(e.drawable.current={orig:i,pos:o,brush:a(t),snapToValidMove:e.drawable.defaultSnapToValidMove},s(e))},o.processDraw=s,o.move=function(e,t){e.drawable.current&&(e.drawable.current.pos=(0,r.eventPosition)(t))},o.end=function(e){const t=e.drawable.current;t&&(t.mouseSq&&function(e,t){const o=e=>e.orig===t.orig&&e.dest===t.dest,n=e.shapes.filter(o)[0];n&&(e.shapes=e.shapes.filter((e=>!o(e))));n&&n.brush===t.brush||e.shapes.push(t);l(e)}(e.drawable,t),c(e))},o.cancel=c,o.clear=function(e){e.drawable.shapes.length&&(e.drawable.shapes=[],e.dom.redraw(),l(e.drawable))}},{"./board":3,"./util":20}],8:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.drop=o.cancelDropMode=o.setDropMode=void 0;const n=e("./board"),r=e("./util"),i=e("./drag"),s=e("./predrop");o.setDropMode=function(e,t){e.dropmode.active=!0,e.dropmode.piece=t,(0,i.cancel)(e),n.unselect(e),t&&n.isPredroppable(e)&&(e.predroppable.dropDests=(0,s.default)(e.pieces,t,e.geometry,e.variant))},o.cancelDropMode=function(e){var t;e.dropmode.active=!1,r.callUserFunction(null===(t=e.dropmode.events)||void 0===t?void 0:t.cancel)},o.drop=function(e,t){if(!e.dropmode.active)return;n.unsetPremove(e),n.unsetPredrop(e);const o=e.dropmode.piece;if(o){e.pieces.set("a0",o);const i=r.eventPosition(t),s=i&&n.getKeyAtDomPos(i,e.orientation,e.dom.bounds(),e.geometry);s&&n.dropNewPiece(e,"a0",s)}e.dom.redraw()}},{"./board":3,"./drag":6,"./predrop":13,"./util":20}],9:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.bindDocument=o.bindBoard=void 0;const n=e("./drag"),r=e("./draw"),i=e("./drop"),s=e("./util"),c=e("./board");function a(e,t,o,n){return e.addEventListener(t,o,n),()=>e.removeEventListener(t,o,n)}function l(e,t,o){return n=>{e.drawable.current?e.drawable.enabled&&o(e,n):e.viewOnly||t(e,n)}}function d(e,t){const o=(0,s.eventPosition)(t),n=o&&(0,c.getKeyAtDomPos)(o,e.orientation,e.dom.bounds(),e.geometry);if(n&&e.pieces.get(n))return e.pieces.get(n)}o.bindBoard=function(e,t){const o=e.dom.elements.board;if(!e.dom.relative&&e.resizable&&"ResizeObserver"in window){new window.ResizeObserver(t).observe(o)}if(e.viewOnly)return;const c=function(e){return t=>{var o;e.draggable.current?n.cancel(e):e.drawable.current?r.cancel(e):t.shiftKey||(0,s.isRightButton)(t)?e.drawable.enabled&&r.start(e,t):e.viewOnly||(e.dropmode.active&&void 0===d(e,t)||e.dropmode.active&&e.movable.color!==e.turnColor&&(null===(o=d(e,t))||void 0===o?void 0:o.color)===e.turnColor?(0,i.drop)(e,t):((0,i.cancelDropMode)(e),n.start(e,t)))}}(e);o.addEventListener("touchstart",c,{passive:!1}),o.addEventListener("mousedown",c,{passive:!1}),(e.disableContextMenu||e.drawable.enabled)&&o.addEventListener("contextmenu",(e=>e.preventDefault()))},o.bindDocument=function(e,t){const o=[];if(e.dom.relative||!e.resizable||"ResizeObserver"in window||o.push(a(document.body,"chessground.resize",t)),!e.viewOnly){const t=l(e,n.move,r.move),i=l(e,n.end,r.end);for(const e of["touchmove","mousemove"])o.push(a(document,e,t));for(const e of["touchend","mouseup"])o.push(a(document,e,i));const s=()=>e.dom.bounds.clear();o.push(a(document,"scroll",s,{capture:!0,passive:!0})),o.push(a(window,"resize",s,{passive:!0}))}return()=>o.forEach((e=>e()))}},{"./board":3,"./drag":6,"./draw":7,"./drop":8,"./util":20}],10:[function(e,t,o){"use strict";function n(e,t){e.exploding&&(t?e.exploding.stage=t:e.exploding=void 0,e.dom.redraw())}Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(e,t){e.exploding={stage:1,keys:t},e.dom.redraw(),setTimeout((()=>{n(e,2),setTimeout((()=>n(e,void 0)),120)}),120)}},{}],11:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.write=o.read=o.initial=void 0;const n=e("./util"),r=e("./types");function i(e){return e.replace("+","p")+"-piece"}function s(e){const t=e.slice(0,e.indexOf("-"));return t.length>1?t.replace("p","+"):t}o.initial="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR",o.read=function(e,t){"start"===e&&(e=o.initial),-1!==e.indexOf("[")&&(e=e.slice(0,e.indexOf("[")));const r=new Map;let s=t.height,c=0,a=!1,l=0;for(const o of e)switch(o){case" ":return r;case"/":if(--s,0===s)return r;c=0,l=0;break;case"+":a=!0;break;case"~":{const e=r.get((0,n.pos2key)([c,s]));e&&(e.promoted=!0);break}default:{const e=o.charCodeAt(0);if(48<=e&&e<58)l=10*l+e-48;else{c+=1+l,l=0;const e=o.toLowerCase(),t={role:i(e),color:o===e?"black":"white"};a&&(t.role="p"+t.role,t.promoted=!0,a=!1),r.set((0,n.pos2key)([c,s]),t)}}}return r},o.write=function(e,t){const o=r.dimensions[t];return n.invNRanks.slice(-o.height).map((t=>n.NRanks.slice(0,o.width).map((o=>{const r=e.get((0,n.pos2key)([o,t]));if(r){const e=s(r.role)+(r.promoted&&"+"!==s(r.role).charAt(0)?"~":"");return"white"===r.color?e.toUpperCase():e}return"1"})).join(""))).join("/").replace(/1{2,}/g,(e=>e.length.toString()))}},{"./types":19,"./util":20}],12:[function(e,t,o){t.exports=e("./chessground").Chessground},{"./chessground":4}],13:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});const n=e("./util"),r=e("./types"),i=(e,t)=>!0;function s(e,t,o,n){const i=r.dimensions[n].height;return e<1&&(e+=i),t<1&&(t+=i),(n,r)=>("black"===o&&(r=i-r+1),e<=r&&r<=t)}o.default=function(e,t,o,c){const a=t.color,l=t.role;let d=i;switch(c){case"crazyhouse":case"shouse":case"capahouse":case"gothhouse":if("p-piece"===l)d=s(2,-1,a,o);break;case"placement":d=s(1,1,a,o);break;case"sittuyin":if("r-piece"===l)d=s(1,1,a,o);else d=(e,t)=>{const n=r.dimensions[o].width,i=r.dimensions[o].height;return"black"===a&&(e=n-e+1,t=i-t+1),t<3||3===t&&e>4};break;case"shogi":case"minishogi":case"gorogoro":switch(l){case"p-piece":case"l-piece":d=s(1,-1,a,o);break;case"n-piece":d=s(1,-2,a,o)}break;case"kyotoshogi":case"dobutsu":d=i;break;case"torishogi":if("s-piece"===l)d=s(1,-1,a,o);break;case"grandhouse":if("p-piece"===l)d=s(2,7,a,o);break;case"shogun":d=s(1,5,a,o);break;case"synochess":d=(e,t)=>5===t;break;case"shinobi":d=(e,t)=>t<=4;break;default:console.warn("Unknown drop variant",c)}return n.allKeys(o).map(n.key2pos).filter((t=>{var o;return(null===(o=e.get(n.pos2key(t)))||void 0===o?void 0:o.color)!==a&&d(t[0],t[1])})).map(n.pos2key)}},{"./types":19,"./util":20}],14:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.premove=o.loachecker=o.queen=o.knight=void 0;const n=e("./util"),r=e("./types");function i(e,t){return Math.abs(e-t)}function s(e){return(t,o,n,r)=>i(t,n)<2&&("white"===e?r===o+1||o<=2&&r===o+2&&t===n:r===o-1||o>=7&&r===o-2&&t===n)}o.knight=(e,t,o,n)=>{const r=i(e,o),s=i(t,n);return 1===r&&2===s||2===r&&1===s};const c=(e,t,o,n)=>i(e,o)===i(t,n),a=(e,t,o,n)=>e===o||t===n;o.queen=(e,t,o,n)=>c(e,t,o,n)||a(e,t,o,n);function l(e,t,o){return(r,s,c,a)=>i(r,c)<2&&i(s,a)<2||o&&s===a&&s===("white"===e?1:8)&&(5===r&&(n.containsX(t,1)&&3===c||n.containsX(t,8)&&7===c)||n.containsX(t,c))}function d(e,t){const o="white"===t?"1":"8",r=[];for(const[i,s]of e)i[1]===o&&s&&s.color===t&&"r-piece"===s.role&&r.push(n.key2pos(i)[0]);return r}o.loachecker=(e,t,o,n)=>c(e,t,o,n)||a(e,t,o,n);const p=(e,t,o,n)=>i(e,o)<2&&i(t,n)<2;function u(e,t,o){return(r,i,s,c)=>p(r,i,s,c)||o&&i===c&&i===("white"===e?1:8)&&n.containsX(t,s)}const h=(e,t,o,n)=>{const r=i(e,o),s=i(t,n);return 1===r&&0===s||0===r&&1===s},b=(e,t,o,n)=>i(e,o)===i(t,n)&&1===i(e,o),f=(e,t,n,r)=>c(e,t,n,r)||(0,o.knight)(e,t,n,r),g=(e,t,n,r)=>a(e,t,n,r)||(0,o.knight)(e,t,n,r),m=(e,t,n,r)=>c(e,t,n,r)||a(e,t,n,r)||(0,o.knight)(e,t,n,r),v=(e,t,n,r)=>p(e,t,n,r)||(0,o.knight)(e,t,n,r);function k(e){return(t,o,n,r)=>i(t,n)<2&&("white"===e?r===o+1||o<=3&&r===o+2&&t===n:r===o-1||o>=8&&r===o-2&&t===n)}function w(e){return(t,o,n,r)=>n===t&&("white"===e?r>o:r<o)}function y(e){return(t,o,n,r)=>b(t,o,n,r)||t===n&&("white"===e?r===o+1:r===o-1)}function P(e){return(t,o,n,r)=>h(t,o,n,r)||i(t,n)<2&&("white"===e?r===o+1:r===o-1)}function M(e){return(t,o,n,r)=>n===t&&("white"===e?r===o+1:r===o-1)}function C(e){return(t,o,n,r)=>(n===t-1||n===t+1)&&("white"===e?r===o+2:r===o-2)}const S=(e,t,o,n)=>a(e,t,o,n)||b(e,t,o,n),q=(e,t,o,n)=>c(e,t,o,n)||h(e,t,o,n);function D(e,t){const o=r.dimensions[e],n=Math.floor((o.width+1)/2),i="white"===t?1:o.height-2;return[[n-1,i+2],[n,i+2],[n+1,i+2],[n-1,i+1],[n,i+1],[n+1,i+1],[n-1,i],[n,i],[n+1,i]]}const O={3:{white:D(3,"white"),black:D(3,"black")},6:{white:D(6,"white"),black:D(6,"black")}};function A(e){return(t,o,n,r)=>n===t&&("white"===e?r===o+1:r===o-1)||r===o&&i(t,n)<2}function x(e){return(t,o,n,r)=>((e,t,o,n)=>{const r=i(e,o);return r===i(t,n)&&2===r})(t,o,n,r)&&("white"===e?r<6:r>5)}function T(e,t){const o=O[t][e];return(e,t,n,r)=>h(e,t,n,r)&&o.some((e=>e[0]===n&&e[1]===r))}const K=(e,t,o,n)=>i(e,o)===i(t,n)&&i(e,o)<3,_=(e,t,o,n)=>{const r=i(e,o),s=i(t,n);return 2===r&&3===s||3===r&&2===s};const N=(e,t,o,n)=>{const r=i(e,o),s=i(t,n);return!(1!==r&&2!==r||1!==s&&2!==s)},F=(e,t,o,n)=>{const r=i(e,o),s=i(t,n);return 0===r&&(2===s||3===s)||0===s&&(2===r||3===r)||r===s&&(2===r||3===r)},E=(e,t,o,n)=>{const r=i(e,o),s=i(t,n);return 1===r||1===s||2===r&&(0===s||2===s)||0===r&&2===s},j=(e,t,o,n)=>{const r=i(e,o),s=i(t,n);return r<3&&(s<2||2===s&&0===r)},W=(e,t,n,r)=>{const s=i(e,n),c=i(t,r);return(0,o.knight)(e,t,n,r)||1===s&&3===c||3===s&&1===c},L=(e,t,n,r)=>(0,o.knight)(e,t,n,r)||(0,o.queen)(e,t,n,r),R=(e,t,o,n)=>{const r=i(e,o),s=i(t,n);return r===s&&r<4||0===s&&2===r||2===s&&r<2},U=(e,t,o,n)=>{const r=i(e,o),s=i(t,n);return r<3&&s<3&&!(1===r&&0===s)&&!(0===r&&1===s)};const B=(e,t,o,n)=>p(e,t,o,n)&&n!==t;o.premove=function(e,t,r,D,$,I){const X=e.get(t),z=X.role,V=X.color;if(!X)return[];const H=n.key2pos(t);let G;switch($){case"xiangqi":case"manchu":switch(z){case"p-piece":G=function(e){return(t,o,n,r)=>n===t&&("white"===e?r===o+1:r===o-1)||r===o&&i(t,n)<2&&("white"===e?o>5:o<6)}(V);break;case"c-piece":case"r-piece":G=a;break;case"n-piece":G=o.knight;break;case"b-piece":G=x(V);break;case"a-piece":G=function(e,t){const o=O[t][e];return(e,t,n,r)=>b(e,t,n,r)&&o.some((e=>e[0]===n&&e[1]===r))}(V,D);break;case"k-piece":G=T(V,D);break;case"m-piece":G=g}break;case"janggi":switch(X.role){case"p-piece":G=function(e,t){const o=O[t][n.opposite(e)];return(t,n,r,s)=>{let c;switch(o.findIndex((e=>e[0]===t&&e[1]===n))){case 0:c=(t,o,n,r)=>n===t+1&&"black"===e&&r===o-1;break;case 2:c=(t,o,n,r)=>n===t-1&&"black"===e&&r===o-1;break;case 4:c=(t,o,n,r)=>1===i(t,n)&&("white"===e?r===o+1:r===o-1);break;case 6:c=(t,o,n,r)=>n===t+1&&"white"===e&&r===o+1;break;case 8:c=(t,o,n,r)=>n===t-1&&"white"===e&&r===o+1;break;default:c=()=>!1}return r===t&&("white"===e?s===n+1:s===n-1)||s===n&&i(t,r)<2||c(t,n,r,s)}}(V,D);break;case"c-piece":case"r-piece":G=function(e){const t=O[e].white,o=O[e].black;return(e,n,r,s)=>{let c;const l=t.findIndex((t=>t[0]===e&&t[1]===n)),d=o.findIndex((t=>t[0]===e&&t[1]===n)),p=-1!==l?l:d,u=i(e,r),h=i(n,s);switch(p){case 0:c=(e,t,o,n)=>u===h&&o>e&&o<=e+2&&n<t&&n>=t-2;break;case 2:c=(e,t,o,n)=>u===h&&o<e&&o>=e-2&&n<t&&n>=t-2;break;case 4:c=b;break;case 6:c=(e,t,o,n)=>u===h&&o>e&&o<=e+2&&n>t&&n<=t+2;break;case 8:c=(e,t,o,n)=>u===h&&o<e&&o>=e-2&&n>t&&n<=t+2;break;default:c=()=>!1}return a(e,n,r,s)||c(e,n,r,s)}}(D);break;case"n-piece":G=o.knight;break;case"b-piece":G=_;break;case"a-piece":case"k-piece":G=function(e,t){const o=O[t][e];return(e,t,n,r)=>{let i;switch(o.findIndex((o=>o[0]===e&&o[1]===t))){case 0:i=(e,t,o,n)=>o===e+1&&n===t-1;break;case 2:i=(e,t,o,n)=>o===e-1&&n===t-1;break;case 4:i=b;break;case 6:i=(e,t,o,n)=>o===e+1&&n===t+1;break;case 8:i=(e,t,o,n)=>o===e-1&&n===t+1;break;default:i=()=>!1}return(h(e,t,n,r)||i(e,t,n,r))&&o.some((e=>e[0]===n&&e[1]===r))}}(V,D)}break;case"minixiangqi":switch(X.role){case"p-piece":G=A(V);break;case"c-piece":case"r-piece":G=a;break;case"n-piece":G=o.knight;break;case"k-piece":G=T(V,D)}break;case"shogi":case"minishogi":case"gorogoro":switch(X.role){case"p-piece":G=M(V);break;case"l-piece":G=w(V);break;case"n-piece":G=C(V);break;case"k-piece":G=p;break;case"s-piece":G=y(V);break;case"pp-piece":case"pl-piece":case"pn-piece":case"ps-piece":case"g-piece":G=P(V);break;case"b-piece":G=c;break;case"r-piece":G=a;break;case"pr-piece":G=S;break;case"pb-piece":G=q}break;case"kyotoshogi":switch(X.role){case"l-piece":G=w(V);break;case"pl-piece":case"pn-piece":G=P(V);break;case"s-piece":G=y(V);break;case"ps-piece":G=c;break;case"n-piece":G=C(V);break;case"p-piece":G=M(V);break;case"pp-piece":G=a;break;case"k-piece":G=p}break;case"dobutsu":switch(X.role){case"c-piece":G=M(V);break;case"e-piece":G=b;break;case"g-piece":G=h;break;case"l-piece":G=p;break;case"pc-piece":G=P(V)}break;case"torishogi":switch(z){case"s-piece":G=M(V);break;case"ps-piece":G=function(e){return(t,o,n,r)=>{const s=i(t,n);return"white"===e?2===s&&r===o+2||0===s&&r===o-2:2===s&&r===o-2||0===s&&r===o+2}}(V);break;case"l-piece":G=function(e){return(t,o,n,r)=>{const s=i(t,n),c=i(o,r);return"white"===e?n===t&&r>o||s===c&&n>t&&r<o||n===t-1&&r===o-1:n===t&&r<o||s===c&&n<t&&r>o||n===t+1&&r===o+1}}(V);break;case"r-piece":G=function(e){return(t,o,n,r)=>{const s=i(t,n),c=i(o,r);return"white"===e?n===t&&r>o||s===c&&n<t&&r<o||n===t+1&&r===o-1:n===t&&r<o||s===c&&n>t&&r>o||n===t-1&&r===o+1}}(V);break;case"p-piece":G=function(e){return(t,o,n,r)=>{const s=i(t,n);return"white"===e?n===t&&r===o+2||1===s&&r===o-1:n===t&&r===o-2||1===s&&r===o+1}}(V);break;case"c-piece":G=B;break;case"f-piece":G=function(e){return(t,o,n,r)=>"white"===e?p(t,o,n,r)&&!(n===t&&r===o-1):p(t,o,n,r)&&!(n===t&&r===o+1)}(V);break;case"pf-piece":G=function(e){return(t,o,n,r)=>{const s=i(t,n),c=i(o,r);return"white"===e?p(t,o,n,r)||s===c&&(r>o||r<o&&c<=2)||n===t&&r<o:p(t,o,n,r)||s===c&&(r<o||r>o&&c<=2)||n===t&&r>o}}(V);break;case"k-piece":G=p}break;case"makruk":case"makpong":case"sittuyin":case"cambodian":switch(z){case"p-piece":G=s(V);break;case"r-piece":G=a;break;case"n-piece":G=o.knight;break;case"s-piece":G=y(V);break;case"f-piece":case"m-piece":G=b;break;case"k-piece":G=p}break;case"grand":case"grandhouse":switch(z){case"p-piece":G=k(V);break;case"r-piece":G=a;break;case"n-piece":G=o.knight;break;case"b-piece":G=c;break;case"q-piece":G=o.queen;break;case"c-piece":G=g;break;case"a-piece":G=f;break;case"k-piece":G=p}break;case"shako":switch(z){case"p-piece":G=k(V);break;case"c-piece":case"r-piece":G=a;break;case"n-piece":G=o.knight;break;case"b-piece":G=c;break;case"q-piece":G=o.queen;break;case"e-piece":G=K;break;case"k-piece":G=function(e,t,o){return(r,i,s,c)=>p(r,i,s,c)||o&&i===c&&i===("white"===e?2:9)&&6===r&&(8===s&&n.containsX(t,9)||4===s&&n.containsX(t,2))}(V,function(e,t){const o="white"===t?"2":"9",r=[];for(const[i,s]of e)i[1]===o&&s&&s.color===t&&"r-piece"===s.role&&r.push(n.key2pos(i)[0]);return r}(e,V),r)}break;case"shogun":switch(z){case"p-piece":G=s(V);break;case"pp-piece":G=p;break;case"r-piece":G=a;break;case"pr-piece":G=g;break;case"n-piece":G=o.knight;break;case"pn-piece":G=v;break;case"b-piece":G=c;break;case"pb-piece":G=f;break;case"f-piece":G=b;break;case"pf-piece":G=o.queen;break;case"k-piece":G=l(V,d(e,V),r)}break;case"orda":case"ordamirror":switch(z){case"p-piece":G=s(V);break;case"r-piece":G=a;break;case"n-piece":G=o.knight;break;case"b-piece":G=c;break;case"q-piece":G=o.queen;break;case"l-piece":G=g;break;case"h-piece":G=v;break;case"a-piece":G=f;break;case"y-piece":G=y(V);break;case"f-piece":G=m;break;case"k-piece":G=l(V,d(e,V),r)}break;case"synochess":switch(z){case"p-piece":G=s(V);break;case"c-piece":case"r-piece":G=a;break;case"n-piece":G=o.knight;break;case"b-piece":G=c;break;case"q-piece":G=o.queen;break;case"s-piece":G=A(V);break;case"e-piece":G=K;break;case"a-piece":G=p;break;case"k-piece":G=l(V,d(e,V),r&&"white"===V)}break;case"musketeer":switch(z){case"p-piece":G=s(V);break;case"r-piece":G=a;break;case"n-piece":G=o.knight;break;case"b-piece":G=c;break;case"q-piece":G=o.queen;break;case"l-piece":G=N;break;case"o-piece":G=j;break;case"u-piece":G=W;break;case"d-piece":G=L;break;case"c-piece":G=g;break;case"a-piece":G=f;break;case"e-piece":G=E;break;case"h-piece":G=F;break;case"f-piece":G=R;break;case"s-piece":G=U;break;case"k-piece":G=l(V,d(e,V),r)}break;case"hoppelpoppel":switch(z){case"p-piece":G=s(V);break;case"r-piece":G=a;break;case"n-piece":case"b-piece":G=f;break;case"q-piece":G=o.queen;break;case"k-piece":G=l(V,d(e,V),r)}break;case"shinobi":switch(z){case"p-piece":G=s(V);break;case"pl-piece":case"r-piece":G=a;break;case"ph-piece":case"n-piece":G=o.knight;break;case"pm-piece":case"b-piece":G=c;break;case"q-piece":G=o.queen;break;case"pp-piece":case"c-piece":G=p;break;case"l-piece":G=w(V);break;case"h-piece":G=C(V);break;case"m-piece":G=b;break;case"d-piece":G=S;break;case"j-piece":G=f;break;case"k-piece":G=l(V,d(e,V),r)}break;case"empire":switch(z){case"p-piece":G=s(V);break;case"s-piece":G=A(V);break;case"r-piece":G=a;break;case"n-piece":G=o.knight;break;case"b-piece":G=c;break;case"d-piece":case"t-piece":case"c-piece":case"q-piece":G=o.queen;break;case"e-piece":G=m;break;case"k-piece":G=l(V,d(e,V),r)}break;case"capablanca":case"capahouse":switch(z){case"p-piece":G=s(V);break;case"r-piece":G=a;break;case"n-piece":G=o.knight;break;case"b-piece":G=c;break;case"q-piece":G=o.queen;break;case"c-piece":G=g;break;case"a-piece":G=f;break;case"k-piece":G=I?u(V,d(e,V),r):function(e,t,o){return(r,i,s,c)=>p(r,i,s,c)||o&&i===c&&i===("white"===e?1:8)&&6===r&&(9===s&&n.containsX(t,10)||3===s&&n.containsX(t,1))}(V,d(e,V),r)}break;default:switch(z){case"p-piece":G=s(V);break;case"r-piece":G=a;break;case"n-piece":G=o.knight;break;case"b-piece":G=c;break;case"q-piece":G=o.queen;break;case"e-piece":case"c-piece":G=g;break;case"h-piece":case"a-piece":G=f;break;case"k-piece":G=I?u(V,d(e,V),r):l(V,d(e,V),r);break;case"l-piece":G=o.loachecker}}return n.allKeys(D).map(n.key2pos).filter((e=>(H[0]!==e[0]||H[1]!==e[1])&&G(H[0],H[1],e[0],e[1]))).map(n.pos2key)}},{"./types":19,"./util":20}],15:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.updateBounds=o.render=void 0;const n=e("./util"),r=e("./board"),i=e("./transformations");function s(e){return"PIECE"===e.tagName}function c(e){return"SQUARE"===e.tagName}function a(e,t){for(const o of t)e.dom.elements.board.removeChild(o)}function l(e,t,o,n){let r=2+((e=i.mapToWhite[t](e,n))[1]-1)*n.height+(n.width-e[0]);return o&&(r=67-r),r+""}function d(e,t){const o=e.promoted?"promoted ":"",n=e.color===t?"ally":"enemy";return`${e.color} ${o}${e.role} ${n}`}function p(e,t,o){const n=e.get(t);n?e.set(t,`${n} ${o}`):e.set(t,o)}function u(e,t,o){const n=e.get(t);n?n.push(o):e.set(t,[o])}o.render=function(e){const t=e.orientation,o=(0,r.whitePov)(e),i=e.dom.relative?n.posToTranslateRel:(0,n.posToTranslateAbs)(e.dom.bounds(),e.dimensions),h=e.dom.relative?n.translateRel:n.translateAbs,b=e.dom.elements.board,f=e.pieces,g=e.animation.current,m=g?g.plan.anims:new Map,v=g?g.plan.fadings:new Map,k=e.draggable.current,w=function(e){var t,o,n,r;const i=new Map;if(e.lastMove&&e.highlight.lastMove)for(const a of e.lastMove)"a0"!==a&&p(i,a,"last-move");e.check&&e.highlight.check&&p(i,e.check,"check");if(e.selected){if(p(i,e.selected,"selected"),e.movable.showDests){const o=null===(t=e.movable.dests)||void 0===t?void 0:t.get(e.selected);if(o)for(const t of o)p(i,t,"move-dest"+(e.pieces.has(t)?" oc":""));const n=e.premovable.dests;if(n)for(const t of n)p(i,t,"premove-dest"+(e.pieces.has(t)?" oc":""))}}else if(e.dropmode.active||"a0"===(null===(o=e.draggable.current)||void 0===o?void 0:o.orig)){const t=e.dropmode.active?e.dropmode.piece:null===(n=e.draggable.current)||void 0===n?void 0:n.piece;if(t){if(e.dropmode.showDropDests){const o=null===(r=e.dropmode.dropDests)||void 0===r?void 0:r.get(t.role);if(o)for(const e of o)p(i,e,"move-dest")}if(e.predroppable.showDropDests){const t=e.predroppable.dropDests;if(t)for(const o of t)p(i,o,"premove-dest"+(e.pieces.has(o)?" oc":""))}}}const s=e.premovable.current;if(s)for(const a of s)p(i,a,"current-premove");else e.predroppable.current&&p(i,e.predroppable.current.key,"current-premove");const c=e.exploding;if(c)for(const a of c.keys)p(i,a,"exploding"+c.stage);return i}(e),y=new Set,P=new Set,M=new Map,C=new Map;let S,q,D,O,A,x,T,K,_,N;for(q=b.firstChild;q;){if(S=q.cgKey,s(q))if(D=f.get(S),A=m.get(S),x=v.get(S),O=q.cgPiece,!q.cgDragging||k&&k.orig===S||(q.classList.remove("dragging"),h(q,i((0,n.key2pos)(S),t,e.dimensions)),q.cgDragging=!1),!x&&q.cgFading&&(q.cgFading=!1,q.classList.remove("fading")),D){if(A&&q.cgAnimating&&O===d(D,e.myColor)){const o=(0,n.key2pos)(S);o[0]+=A[2],o[1]+=A[3],q.classList.add("anim"),h(q,i(o,t,e.dimensions))}else q.cgAnimating&&(q.cgAnimating=!1,q.classList.remove("anim"),h(q,i((0,n.key2pos)(S),t,e.dimensions)),e.addPieceZIndex&&(q.style.zIndex=l((0,n.key2pos)(S),t,o,e.dimensions)));O!==d(D,e.myColor)||x&&q.cgFading?x&&O===d(x,e.myColor)?(q.classList.add("fading"),q.cgFading=!0):u(M,O,q):y.add(S)}else u(M,O,q);else if(c(q)){const e=q.className;w.get(S)===e?P.add(S):C.has(e)?u(C,e,q):C.set(e,[q])}q=q.nextSibling}for(const[r,s]of w)if(!P.has(r)){_=C.get(s),N=_&&_.pop();const o=i((0,n.key2pos)(r),t,e.dimensions);if(N)N.cgKey=r,h(N,o);else{const e=(0,n.createEl)("square",s);e.cgKey=r,h(e,o),b.insertBefore(e,b.firstChild)}}for(const[r,s]of f)if(A=m.get(r),!y.has(r))if(T=M.get(d(s,e.myColor)),K=T&&T.pop(),K){K.cgKey=r,K.cgFading&&(K.classList.remove("fading"),K.cgFading=!1);const s=(0,n.key2pos)(r);e.addPieceZIndex&&(K.style.zIndex=l(s,t,o,e.dimensions)),A&&(K.cgAnimating=!0,K.classList.add("anim"),s[0]+=A[2],s[1]+=A[3]),h(K,i(s,t,e.dimensions))}else{const c=d(s,e.myColor),a=(0,n.createEl)("piece",c),p=(0,n.key2pos)(r);a.cgPiece=c,a.cgKey=r,A&&(a.cgAnimating=!0,p[0]+=A[2],p[1]+=A[3]),h(a,i(p,t,e.dimensions)),e.addPieceZIndex&&(a.style.zIndex=l(p,t,o,e.dimensions)),b.appendChild(a)}for(const n of M.values())a(e,n);for(const n of C.values())a(e,n)},o.updateBounds=function(e){if(e.dom.relative)return;const t=e.orientation,o=(0,n.posToTranslateAbs)(e.dom.bounds(),e.dimensions);let r=e.dom.elements.board.firstChild;for(;r;)(s(r)&&!r.cgAnimating||c(r))&&(0,n.translateAbs)(r,o((0,n.key2pos)(r.cgKey),t)),r=r.nextSibling}},{"./board":3,"./transformations":18,"./util":20}],16:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.defaults=void 0;const n=e("./fen"),r=e("./util");o.defaults=function(){return{pieces:n.read(n.initial,{width:8,height:8}),orientation:"white",myColor:"white",startColor:"white",turnColor:"white",coordinates:!0,autoCastle:!0,viewOnly:!1,disableContextMenu:!1,resizable:!0,addPieceZIndex:!1,pieceKey:!1,highlight:{lastMove:!0,check:!0},animation:{enabled:!0,duration:200},movable:{free:!0,color:"both",showDests:!0,events:{},rookCastle:!0},premovable:{enabled:!0,showDests:!0,castle:!0,events:{}},predroppable:{enabled:!1,showDropDests:!0,events:{}},draggable:{enabled:!0,distance:3,autoDistance:!0,centerPiece:!0,showGhost:!0,deleteOnDropOff:!1},dropmode:{active:!1,showDropDests:!0},selectable:{enabled:!0},stats:{dragged:!("ontouchstart"in window)},events:{},drawable:{enabled:!0,visible:!0,defaultSnapToValidMove:!0,eraseOnClick:!0,shapes:[],autoShapes:[],brushes:{green:{key:"g",color:"#15781B",opacity:1,lineWidth:10},red:{key:"r",color:"#882020",opacity:1,lineWidth:10},blue:{key:"b",color:"#003088",opacity:1,lineWidth:10},yellow:{key:"y",color:"#e68f00",opacity:1,lineWidth:10},paleBlue:{key:"pb",color:"#003088",opacity:.4,lineWidth:15},paleGreen:{key:"pg",color:"#15781B",opacity:.4,lineWidth:15},paleRed:{key:"pr",color:"#882020",opacity:.4,lineWidth:15},paleGrey:{key:"pgr",color:"#4a4a4a",opacity:.35,lineWidth:15}},pieces:{baseUrl:"https://lichess1.org/assets/piece/cburnett/"},prevSvgHash:""},hold:(0,r.timer)(),dimensions:{width:8,height:8},geometry:0,variant:"chess",chess960:!1,notation:0}}},{"./fen":11,"./util":20}],17:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.setAttributes=o.renderSvg=o.createElement=void 0;const n=e("./util"),r=e("./transformations");function i(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function s(e,t,o,n,r){const i=e.dom.bounds(),s=new Map,c=[];for(const d of t)s.set(d.hash,!1);let a,l=r.firstChild;for(;l;)a=l.getAttribute("cgHash"),s.has(a)?s.set(a,!0):c.push(l),l=l.nextSibling;for(const d of c)r.removeChild(d);for(const p of t)s.get(p.hash)||r.appendChild(d(e,p,o,n,i))}function c({orig:e,dest:t,brush:o,piece:n,modifiers:r,customSvg:i},s,c,d){return[d.width,d.height,c,e,t,o,t&&(s.get(t)||0)>1,n&&a(n),r&&(p=r,""+(p.lineWidth||"")),i&&l(i)].filter((e=>e)).join(",");var p}function a(e){return[e.color,e.role,e.scale].filter((e=>e)).join(",")}function l(e){let t=0;for(let o=0;o<e.length;o++)t=(t<<5)-t+e.charCodeAt(o)>>>0;return"custom-"+t.toString()}function d(e,{shape:t,current:o,hash:r},s,c,a){let l;if(t.customSvg){const o=h((0,n.key2pos)(t.orig),e.orientation,e.dimensions);l=function(e,t,o,n){const{width:r,height:s}=o,c=r/n.width,a=s/n.height,l=(t[0]-1)*c,d=(n.height-(t[1]-1))*a,p=u(i("g"),{transform:`translate(${l},${d})`}),h=u(i("svg"),{width:c,height:a,viewBox:"0 0 100 100"});return p.appendChild(h),h.innerHTML=e,p}(t.customSvg,o,a,e.dimensions)}else if(t.piece)l=function(e,t,o,n,r,s){const c=m(t,n,r),a=n.width/r.width*(o.scale||1),l=n.height/r.height*(o.scale||1),d=o.color[0]+o.role[0].toUpperCase(),p=e.endsWith("/")?e+d+".svg":e,h=o.color===s?"ally":"enemy";return u(i("image"),{className:`${o.role} ${o.color} ${h}`,x:c[0]-a/2,y:c[1]-l/2,width:a,height:l,href:p})}(e.drawable.pieces.baseUrl,h((0,n.key2pos)(t.orig),e.orientation,e.dimensions),t.piece,a,e.dimensions,e.myColor);else{const r=h((0,n.key2pos)(t.orig),e.orientation,e.dimensions);if(t.orig&&t.dest){let d=s[t.brush];t.modifiers&&(d=b(d,t.modifiers)),l=function(e,t,o,n,r,s,c){const a=function(e,t,o){return(t?20:10)/(64*o.width)*e.width}(s,r&&!n,c),l=m(t,s,c),d=m(o,s,c),p=d[0]-l[0],h=d[1]-l[1],b=Math.atan2(h,p),v=Math.cos(b)*a,k=Math.sin(b)*a;return u(i("line"),{stroke:e.color,"stroke-width":f(e,n,s,c),"stroke-linecap":"round","marker-end":"url(#arrowhead-"+e.key+")",opacity:g(e,n),x1:l[0],y1:l[1],x2:d[0]-v,y2:d[1]-k})}(d,r,h((0,n.key2pos)(t.dest),e.orientation,e.dimensions),o,(c.get(t.dest)||0)>1,a,e.dimensions)}else l=function(e,t,o,n,r){const s=m(t,n,r),c=function(e,t){const o=e.width/(64*t.width);return[3*o,4*o]}(n,r),a=(n.width+n.height)/(2*(r.height+r.width));return u(i("circle"),{stroke:e.color,"stroke-width":c[o?0:1],fill:"none",opacity:g(e,o),cx:s[0],cy:s[1],r:a-c[1]/2})}(s[t.brush],r,o,a,e.dimensions)}return l.setAttribute("cgHash",r),l}function p(e){const t=u(i("marker"),{id:"arrowhead-"+e.key,orient:"auto",markerWidth:4,markerHeight:8,refX:2.05,refY:2.01});return t.appendChild(u(i("path"),{d:"M0,0 V4 L3,2 Z",fill:e.color})),t.setAttribute("cgKey",e.key),t}function u(e,t){for(const o in t)e.setAttribute(o,t[o]);return e}function h(e,t,o){return r.mapToWhiteInverse[t](e,o)}function b(e,t){return{color:e.color,opacity:Math.round(10*e.opacity)/10,lineWidth:Math.round(t.lineWidth||e.lineWidth),key:[e.key,t.lineWidth].filter((e=>e)).join("")}}function f(e,t,o,n){return(e.lineWidth||10)*(t?.85:1)/(64*n.width)*o.width}function g(e,t){return(e.opacity||1)*(t?.9:1)}function m(e,t,o){return[(e[0]-.5)*t.width/o.width,(o.height+.5-e[1])*t.height/o.height]}o.createElement=i,o.renderSvg=function(e,t,o){const n=e.drawable,r=n.current,i=r&&r.mouseSq?r:void 0,a=new Map,l=e.dom.bounds();for(const s of n.shapes.concat(n.autoShapes).concat(i?[i]:[]))s.dest&&a.set(s.dest,(a.get(s.dest)||0)+1);const d=n.shapes.concat(n.autoShapes).map((e=>({shape:e,current:!1,hash:c(e,a,!1,l)})));i&&d.push({shape:i,current:!0,hash:c(i,a,!0,l)});const u=d.map((e=>e.hash)).join(";");if(u===e.drawable.prevSvgHash)return;e.drawable.prevSvgHash=u;const h=t.querySelector("defs"),f=t.querySelector("g"),g=o.querySelector("g");!function(e,t,o){const n=new Map;let r;for(const c of t)c.shape.dest&&(r=e.brushes[c.shape.brush],c.shape.modifiers&&(r=b(r,c.shape.modifiers)),n.set(r.key,r));const i=new Set;let s=o.firstChild;for(;s;)i.add(s.getAttribute("cgKey")),s=s.nextSibling;for(const[c,a]of n.entries())i.has(c)||o.appendChild(p(a))}(n,d,h),s(e,d.filter((e=>!e.shape.customSvg)),n.brushes,a,f),s(e,d.filter((e=>e.shape.customSvg)),n.brushes,a,g)},o.setAttributes=u},{"./transformations":18,"./util":20}],18:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.translateBase=o.mapToWhiteInverse=o.mapToWhite=void 0,o.mapToWhite={white:(e,t)=>e,black:(e,t)=>[t.width+1-e[0],t.height+1-e[1]],right:(e,t)=>[t.height+1-e[1],e[0]],left:(e,t)=>[e[1],t.width+1-e[0]]},o.mapToWhiteInverse={white:(e,t)=>e,black:(e,t)=>[t.width+1-e[0],t.height+1-e[1]],right:(e,t)=>[e[1],t.width+1-e[0]],left:(e,t)=>[t.width+1-e[0],e[1]]},o.translateBase={white:(e,t,o,n)=>[(e[0]-1)*t,(n.height-e[1])*o],black:(e,t,o,n)=>[(n.width-e[0])*t,(e[1]-1)*o],right:(e,t,o,n)=>[(e[1]-1)*t,(e[0]-1)*o],left:(e,t,o,n)=>[(n.width-e[0])*t,(e[1]-1)*o]}},{}],19:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.shogiVariants=o.dimensions=o.letters=o.ranks10=o.ranks=o.files=o.colors=o.orientations=void 0,o.orientations=["white","black","left","right"],o.colors=["white","black"],o.files=["a","b","c","d","e","f","g","h","i","j"],o.ranks=["1","2","3","4","5","6","7","8","9",":"],o.ranks10=["1","2","3","4","5","6","7","8","9","10"],o.letters=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],o.dimensions=[{width:8,height:8},{width:9,height:9},{width:10,height:8},{width:9,height:10},{width:10,height:10},{width:5,height:5},{width:7,height:7},{width:3,height:4},{width:5,height:6}],o.shogiVariants=["shogi","minishogi","kyotoshogi","dobutsu","gorogoro","torishogi"]},{}],20:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.callUserFunction=o.computeSquareCenter=o.createEl=o.isRightButton=o.eventPosition=o.setVisible=o.translateRel=o.translateAbs=o.posToTranslateRel=o.posToTranslateAbs=o.samePiece=o.distanceSq=o.containsX=o.isColor=o.orientationForLOA=o.oppositeOrientationForLOA=o.oppositeOrientation=o.opposite=o.timer=o.memo=o.allPos=o.key2pos=o.pos2key=o.allKeys=o.invNRanks=o.NRanks=o.invRanks=o.colors=void 0;const n=e("./types"),r=e("./transformations");function i(e=0){const t=n.dimensions[e];return Array.prototype.concat(...(o=t.width,n.files.slice(0,o)).map((e=>function(e){return n.ranks.slice(0,e)}(t.height).map((t=>e+t)))));var o}function s(e){return[e.charCodeAt(0)-96,e.charCodeAt(1)-48]}o.colors=["white","black"],o.invRanks=[...n.ranks].reverse(),o.NRanks=[1,2,3,4,5,6,7,8,9,10],o.invNRanks=[10,9,8,7,6,5,4,3,2,1],o.allKeys=i,o.pos2key=function(e){return n.files[e[0]-1]+n.ranks[e[1]-1]},o.key2pos=s;o.allPos=e=>i(e).map(s),o.memo=function(e){let t;const o=()=>(void 0===t&&(t=e()),t);return o.clear=()=>{t=void 0},o};o.timer=()=>{let e;return{start(){e=performance.now()},cancel(){e=void 0},stop(){if(!e)return 0;const t=performance.now()-e;return e=void 0,t}}};o.opposite=e=>"white"===e?"black":"white";const c={white:"black",black:"white",left:"right",right:"left"};o.oppositeOrientation=e=>c[e];const a={white:"right",black:"white"};o.oppositeOrientationForLOA=e=>a[e];const l={white:"white",black:"right"};o.orientationForLOA=e=>l[e];o.isColor=e=>"white"===e||"black"===e,o.containsX=function(e,t){return void 0!==e&&-1!==e.indexOf(t)};o.distanceSq=(e,t)=>{const o=e[0]-t[0],n=e[1]-t[1];return o*o+n*n};o.samePiece=(e,t)=>e.role===t.role&&e.color===t.color;const d=(e,t,o,n,i)=>r.translateBase[t](e,o,n,i);o.posToTranslateAbs=(e,t)=>{const o=e.width/t.width,n=e.height/t.height;return(e,r)=>d(e,r,o,n,t)};o.posToTranslateRel=(e,t,o)=>d(e,t,100,100,o);o.translateAbs=(e,t)=>{e.style.transform=`translate(${t[0]}px,${t[1]}px)`};o.translateRel=(e,t)=>{e.style.transform=`translate(${t[0]}%,${t[1]}%)`};o.setVisible=(e,t)=>{e.style.visibility=t?"visible":"hidden"};o.eventPosition=e=>{var t;return e.clientX||0===e.clientX?[e.clientX,e.clientY]:(null===(t=e.targetTouches)||void 0===t?void 0:t[0])?[e.targetTouches[0].clientX,e.targetTouches[0].clientY]:void 0};o.isRightButton=e=>2===e.buttons||2===e.button;o.createEl=(e,t)=>{const o=document.createElement(e);return t&&(o.className=t),o},o.computeSquareCenter=function(e,t,o,n){const i=r.mapToWhiteInverse[t](s(e),n);return[o.left+o.width*(i[0]-1+.5)/n.width,o.top+o.height*(n.height-(i[1]-1+.5))/n.height]},o.callUserFunction=function(e,...t){e&&setTimeout((()=>e(...t)),1)}},{"./transformations":18,"./types":19}],21:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.renderWrap=void 0;const n=e("./util"),r=e("./types"),i=e("./svg");function s(e,t){const o=(0,n.createEl)("coords",t);let r;for(const i of e)r=(0,n.createEl)("coord"),r.textContent=i,o.appendChild(r);return o}o.renderWrap=function(e,t,o){e.innerHTML="",e.classList.add("cg-wrap");for(const n of r.orientations)e.classList.toggle("orientation-"+n,t.orientation===n);e.classList.toggle("manipulable",!t.viewOnly);const c=(0,n.createEl)("cg-helper");e.appendChild(c);const a=(0,n.createEl)("cg-container");c.appendChild(a);const l=(0,n.createEl)("extension");a.appendChild(l);const d=(0,n.createEl)("cg-board");let p,u,h;if(a.appendChild(d),t.drawable.visible&&!o&&(p=(0,i.setAttributes)((0,i.createElement)("svg"),{class:"cg-shapes"}),p.appendChild((0,i.createElement)("defs")),p.appendChild((0,i.createElement)("g")),u=(0,i.setAttributes)((0,i.createElement)("svg"),{class:"cg-custom-svgs"}),u.appendChild((0,i.createElement)("g")),a.appendChild(p),a.appendChild(u)),t.coordinates){const e=" "+t.orientation;r.shogiVariants.includes(t.variant)?(a.appendChild(s(r.ranks.slice(0,t.dimensions.height).reverse(),"files"+e)),a.appendChild(s(r.ranks.slice(0,t.dimensions.width).reverse(),"ranks"+e))):6===t.notation?(a.appendChild(s(["0"].concat(r.ranks.slice(0,9).reverse()),"ranks"+e)),a.appendChild(s(r.ranks.slice(0,9),"files"+e))):(a.appendChild(s(r.ranks10.slice(0,t.dimensions.height),"ranks"+e)),a.appendChild(s(r.files.slice(0,t.dimensions.width),"files"+e)))}return t.draggable.showGhost&&!o&&(h=(0,n.createEl)("piece","ghost"),(0,n.setVisible)(h,!1),a.appendChild(h)),{board:d,container:a,ghost:h,svg:p,customSvg:u}}},{"./svg":17,"./types":19,"./util":20}]},{},[12])(12)}));